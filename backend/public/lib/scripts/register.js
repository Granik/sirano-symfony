$(function(){if($('form[name="customer"]').length){function e(){var e=$("#customer_mainSpecialtyId"),a=$("#customer_additionalSpecialtyId");"18"===e.val()?(a.parent().removeClass("d-none"),a.removeAttr("disabled")):(a.val(""),a.parent().addClass("d-none"),a.prop("disabled",!0))}$("#customer_phone").mask("+9 (999) 999-99-99"),$('form[name="customer"]').validate({rules:{"customer[lastname]":{required:!0,lastnameExt:!0},"customer[name]":{required:!0,nameExt:!0},"customer[middlename]":{required:!1,middlenameExt:!0},address:{required:!0,addressExt:{check:["customer[country]","customer[cityName]","customer[fullCityName]"]}},"customer[specialty]":{required:!0,specExt:!0},"customer[email]":{required:!0,email:!0,emailExt:!0,remote:checkUserEmailPath},"customer[password][second]":{equalTo:"#customer_password_first"},"customer[agreeTerms]":"required"},messages:{"customer[agreeTerms]":"Чтобы продолжить регистрацию, вы должны дать согласие"},errorPlacement:function(e,a){var t=$(a).closest(".col-12").children(".error-text");t.length?$(t).append(e):e.insertAfter(a)},submitHandler:function(e){var a=new FormData(e);$.ajax({type:"POST",url:registerUserPath,data:a,processData:!1,contentType:!1,dataType:"json",success:function(e,a,t){"ok"===e.status&&($("#modal-register").modal("hide"),$("#modal-register-success").modal("show"))},error:function(e,a,t){}})}}),$.validator.addMethod("emailExt",function(e,a,t){return e.match(/^[a-zA-Z0-9_\.%\+\-]+@[a-zA-Z0-9\.\-]+\.[a-zA-Z]{2,}$/)},"Неверный формат адреса"),$.validator.addMethod("lastnameExt",function(e,a,t){return e.match(/^([- A-Za-zа-яА-ЯёЁ]+)$/)},"Использованы недопустимые символы"),$.validator.addMethod("nameExt",function(e,a,t){return e.match(/^([A-Za-zа-яА-ЯёЁ]+)$/)},"Использованы недопустимые символы"),$.validator.addMethod("middlenameExt",function(e,a,t){return e?e.match(/^([A-Za-zа-яА-ЯёЁ]+)$/):[e,e]},"Использованы недопустимые символы"),$.validator.addMethod("specExt",function(e,a,t){return e.match(/^([-A-Za-zа-яА-ЯёЁ]+)$/)},"Использованы недопустимые символы"),$.validator.addMethod("addressExt",function(e,a,t){var s=!0;return t.check.forEach(function(e,a,t){var r=$('input[name="'+e+'"]').val();null!=r&&void 0!==r&&(r=r.trim()),r||(s=!1)}),s},"Неизвестный населенный пункт"),$.validator.messages.required="Это обязательное поле",$.validator.messages.email="Неверный формат адреса",$.validator.messages.equalTo="Введённые значения не совпадают",$("#customer_lastname,           #customer_name,           #customer_middlename,           #customer_specialty").keyup(function(e){var a,t=(a=$(this).val()).charAt(0).toUpperCase()+a.slice(1);$(this).val(t)}),e(),$("#customer_mainSpecialtyId").on("change",function(){e()}),$("#modal-register .select2").select2({width:"style",theme:"sirano",minimumResultsForSearch:1/0})}});